<script type="text/javascript">
        if(sessionStorage.getItem('securityContext')==null){
         window.location.href="/APPLETPC/login.html";
        }
        var securityContext = JSON.parse(sessionStorage.getItem('securityContext'));

        var path = sessionStorage.getItem('path');
</script>
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

	<title>仓库管理</title>

	<link   type="text/css" rel="stylesheet" href="/APPLETPC/css/common/common.css">
    <link   type="text/css" rel="stylesheet" href="/APPLETPC/js/bootstrap/css/bootstrap.css">
	<script type="text/javascript" src="/APPLETPC/js/common/common.js"></script>
	<script type="text/javascript" src="/APPLETPC/js/common/util.js"></script>
	<script type="text/javascript"src="/APPLETPC/js/jquery/jquery-2.2.3.min.js"></script>
    <script type="text/javascript" src="/APPLETPC/js/json/json2.js"></script>
    <script type="text/javascript" src="/APPLETPC/js/bootstrap/js/bootstrap.js"></script>
    <script type="text/javascript" src="/APPLETPC/js/plugins/bootstrap-box/js/bootbox.min.js"></script>
	<!-- bootstrap-table -->
	<link type="text/css" rel="stylesheet"
		href="/APPLETPC/js/plugins/bootstrap-table/css/bootstrap-table.css">
		
	<script type="text/javascript"
		src="/APPLETPC/js/plugins/bootstrap-table/js/bootstrap-table.js"></script>
	
	<script type="text/javascript"
		src="/APPLETPC/js/plugins/bootstrap-table/local/bootstrap-table-zh-CN.js"></script>
		
	<!-- bootstrap-treeview -->
	<link type="text/css" rel="stylesheet"
		href="/APPLETPC/js/plugins/bootstrap-treeview/css/bootstrap-treeview.css">
	
	<script type="text/javascript"
		src="/APPLETPC/js/plugins/bootstrap-treeview/js/bootstrap-treeview.js"></script>
</head>
<body>
	<div class="container-fluid" style="margin:0px;padding:0px;">
		<div class="row" style="margin:0px;padding:0px;">
            	<div id="dsdToolbar">
            		<button id="refreshDSDBtn" class="btn btn-sm" onclick="queryWarehouseList();">
			            <i class="glyphicon glyphicon-refresh"></i>&nbsp;刷新
			        </button>
					<button id="addDSDBtn" class="btn btn-sm" onclick="addDSD();">
			            <i class="glyphicon glyphicon-plus"></i>&nbsp;新建
			        </button>
			        <button id="editDSDBtn" class="btn btn-sm" onclick="editDSD();">
			            <i class="glyphicon glyphicon-pencil"></i>&nbsp;编辑
			        </button>
			        <button id="editDSDBtn" class="btn btn-sm" onclick="deleteDSD();">
			            <i class="glyphicon glyphicon-pencil"></i>&nbsp;删除
			        </button>
			       
			        
			    </div>
			    
			    <table id="dsdTable"
			    	   class="table table-condensed"
			           data-toggle="table"
			           data-toolbar="#dsdToolbar"
			           data-height="300"
			           data-icon-size="sm"
			           data-pagination="true"
			           data-page-size="5"
			           data-page-list="[5,10,15,20,25,30]"
			           data-striped="true"
			           data-search="true"
			           data-unique-id="struct_code">
			        <thead>
			           	<tr>
			                <th data-field="code" data-halign="center" data-align="left" data-sortable="true">仓库编码</th>
			                <th data-field="name" data-halign="center" data-align="left" data-sortable="true">名称</th>
			                <th data-field="address" data-halign="center" data-align="center" data-sortable="true">地址</th>
			                <th data-field="remarks" data-halign="center" data-align="left" data-sortable="true">备注</th>
			                <th data-field="warehous_keeper" data-halign="center" data-align="left">仓管员</th>
			                <th data-field="telephone" data-halign="center" data-align="left">仓管员电话</th>
			                <th data-field="stores_name" data-halign="center" data-align="left">所属门店</th>
			                
			            </tr>
			        </thead>
				</table>
  			</div></br>
  		<div class="row" style="margin:0px;padding:0px;">
			
            	<div id="dsdToolbar2">
            		<button id="refreshDSDBtn" class="btn btn-sm" onclick="queryStorageList();">
			            <i class="glyphicon glyphicon-refresh"></i>&nbsp;刷新
			        </button>
					<button id="addDSDBtn" class="btn btn-sm" onclick="addStorage();">
			            <i class="glyphicon glyphicon-plus"></i>&nbsp;新建
			        </button>
			        <button id="editDSDBtn" class="btn btn-sm" onclick="editStorage();">
			            <i class="glyphicon glyphicon-pencil"></i>&nbsp;编辑
			        </button>
			        <button id="editDSDBtn" class="btn btn-sm" onclick="deleteStorage();">
			            <i class="glyphicon glyphicon-pencil"></i>&nbsp;禁用
			        </button>
			         <button id="enableDSDBtn" class="btn btn-sm" onclick="enableStorage();">
			            <i class="glyphicon glyphicon-pencil"></i>&nbsp;启用
			        </button>
			         <button id="enableDSDBtn" class="btn btn-sm" onclick="delStorage();">
			            <i class="glyphicon glyphicon-pencil"></i>&nbsp;删除
			        </button>
			    </div>
			    
			    <table id="dsdTable2"
			    	   class="table table-condensed"
			           data-toggle="table"
			           data-toolbar="#dsdToolbar2"
			           data-height="300"
			           data-icon-size="sm"
			           data-pagination="true"
			           data-page-size="5"
			           data-page-list="[5,10,15,20,25,30]"
			           data-striped="true"
			           data-search="true"
			           data-unique-id="struct_code">
			        <thead>
			           	<tr>
			                <th data-field="code" data-halign="center" data-align="left" data-sortable="true">库位编码</th>
			                <th data-field="name" data-halign="center" data-align="left" data-sortable="true">库位名称</th>
			              
			                <th data-field="warehouse_name" data-halign="center" data-align="left" data-sortable="true">所属仓库</th>
			                
			                <th data-field="stores_name" data-halign="center" data-align="left">所属门店</th>
			                  <th data-field="item_name" data-halign="center" data-align="left">状态</th>
			                <th data-field="remarks" data-halign="center" data-align="left">备注</th>
			            </tr>
			        </thead>
				</table>
  			</div>
	</div>
</body>
</html>

<script type="text/javascript">
var warehouseCode;
var code;
var stores;
var whether;
var stores_name;
var warehouse_name;
$(".btn").addClass("btn-"+bootstrapSkin);
$(document).ready(function() {
	$("#dsdTable").on('click-row.bs.table', function (e, row, $element) {
        $('.warning').removeClass('warning');
        $($element).addClass('warning');
        stores=row.stores;     
        warehouseCode= row.code;
        stores_name=row.stores_name;
        warehouse_name=row.name;
        queryStorageList();
        
    });
	
	$("#dsdTable").on('dbl-click-row.bs.table', function (e, row, $element) {
        $('.warning').removeClass('warning');
        $($element).addClass('warning');
        stores=row.stores;     
        warehouseCode= row.code;
       
        stores_name=row.stores_name;
        warehouse_name=row.name;
        editDSD();
      
        
    });
	$("#dsdTable2").on('click-row.bs.table', function (e, row, $element) {
        $('.warning').removeClass('warning');
        $($element).addClass('warning');
        
        code = row.code;
        stores=row.stores;
        whether=row.whether ;
        
    });
	
	$("#dsdTable2").on('dbl-click-row.bs.table', function (e, row, $element) {
        $('.warning').removeClass('warning');
        $($element).addClass('warning');
        
        code = row.code;
        whether=row.whether;
        stores=row.stores;
        editStorage();
    });
	
	
	 queryWarehouseList();
});
//启用库位
function enableStorage(){
	
	if(whether=="Y"){
		window.top.bootbox.dialog({
			title: "提示信息",
			message: "库位已启用！",
			size: "middle",
			buttons: {
				cancelType: {
		      		label: "确定",
		      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      				return;
	      			}
				}
			}
		})
		return true;
	};
	if(code){
		 window.top.bootbox.dialog({
				title: "提示信息",
				message: "确定要启用吗?",
				size: "middle",
				buttons: {
					OkType: {
			      		label: "确定",
			      		className: "btn-"+bootstrapSkin,
			      		callback: function() {
		    var url = path+"api/sys/StorageLocation/enableStorageLocation";
		    
			
			url += "?warehouse=" + warehouseCode;
			url +="&stores="+stores;
			url +="&storageCode="+code;
			
			$.ajax({
				type: "POST",
			    url: url,
			    async: false,
			    headers:{"token":securityContext.token},
			    success: function(data){
					
					if (data.result_code == "Y") {		
						recordLog("O","APPLETPC","库位启用成功",securityContext.user_id);
						window.top.bootbox.dialog({
							title: "提示信息",
							message: "启用成功！",
							size: "middle",
							buttons: {
								cancelType: {
						      		label: "确定",
						      		className: "btn-"+bootstrapSkin,
					      		callback: function() {
					      			queryStorageList();
					      		}
							}
						}
					});
					
					      		
				} else if (data.result_code == "N") {
					result = false;
					recordLog("OF","APPLETPC","库位启用失败"+"门店:"+stores+"仓库:"+warehouseCode+"库位:"+code,securityContext.user_id);
					window.top.bootbox.dialog({
						title: "错误信息",
						message: "保存失败！" + "<br><br>" + data.result_info,
						size: "middle",
						buttons: {
							cancelType: {
					      		label: "确定",
					      		className: "btn-"+bootstrapSkin,
					      		callback: function() {
					      			return true;
					      		}
							}
						}
					});
				}
		    }
		});
			      		}
					},
					cancelType: {
			      		label: "取消",
			      		className: "btn-"+bootstrapSkin,
			      		callback: function() {
			      			return true;
			      		}
					}
				}
			});
			}else{
					window.top.bootbox.dialog({ 
					title: "提示信息",
				    size: 'small',
				    message: "请先选择仓库！",
				    buttons: {
			saveType: {
	      		label: "确定",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      		return true;
	      		}
	      		  }
	      		}
				});
			}

	
}

// 获取仓库列表
function queryWarehouseList() {
	$("#dsdTable").bootstrapTable('removeAll');
	
	var url = path+"api/sys/Warehouse/WarehouseMgr";
    
    $.ajax({
		type: "POST",
		url: url,
		headers:{"token":securityContext.token},
		async:false,
		success: function(data) {
			
			if (data.result_code == "Y") {
				recordLog("O","APPLETPC","获取仓库列表成功",securityContext.user_id);
				$("#dsdTable").bootstrapTable("load", JSON.parse(data.result_info));
				
		
			} else if (data.result_code == "N") {
				recordLog("OF","APPLETPC","获取仓库列表失败",securityContext.user_id);
				window.top.bootbox.dialog({
					title: "错误信息",
					message: "数据加载失败！" + "<br><br>" + data.result_info,
					size: "middle",
					buttons: {
						cancelType: {
				      		label: "确定",
				      		className: "btn-"+bootstrapSkin,
				      		callback: function() {
				      			return true;
				      		}
						}
					}
				});
			}
		}
	});
}

// 新建仓库 
function addDSD() {
	var url = "/APPLETPC/jsp/modules/system/warehouse_management/WarehouseAdd.html";
	
	
	var structNodeEditFrame = '<iframe id="structNodeEditFrame" class="my-modal-iframe" width="100%" height="400px" src="' + url + '"></iframe>';
	window.top.bootbox.dialog({
		title: "仓库新建",
		message: structNodeEditFrame,
		size: "small",
		buttons: {
			saveType: {
	      		label: "保存",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      			var result = window.top.document.getElementById("structNodeEditFrame").contentWindow.doAddWarehouse();
	      			if (result) {
	      				queryWarehouseList();
	      				
	      			}
	      			return result;
	      		}
			},
			cancelType: {
	      		label: "取消",
	      		className: "btn-default",
	      		callback: function() {
	      			return true;
	      		}
			}
		}
	});
	
	
}


// 编辑仓库
function editDSD() {
	if (!warehouseCode) {
		window.top.bootbox.dialog({ 
			title: "提示信息",
		    size: 'small',
		    message: "请先选择仓库！",
		    buttons: {
			saveType: {
	      		label: "确定",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      		return true;
	      		}
	      		  }
	      		}
		});
		return;
	}
	
	var url = "/APPLETPC/jsp/modules/system/warehouse_management/WarehouseEdit.html";
	sessionStorage.setItem('warehouseCode', warehouseCode);
	sessionStorage.setItem('stores', stores);
	
	var structNodeEditFrame = '<iframe id="structNodeEditFrame" class="my-modal-iframe" width="100%" height="350px" src="' + url + '"></iframe>';
	window.top.bootbox.dialog({
		title: "仓库编辑",
		message: structNodeEditFrame,
		size: "small",
		buttons: {
			saveType: {
	      		label: "保存",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      			var result = window.top.document.getElementById("structNodeEditFrame").contentWindow.doAddEditWarehouse();
	      			if(result){
	      				queryWarehouseList();
	      			}
	      			return result;
	      		}
			},
			cancelType: {
	      		label: "取消",
	      		className: "btn-default",
	      		callback: function() {
	      			return true;
	      		}
			}
		}
	});
}


//删除
 function deleteDSD(){
	
     
        if(warehouseCode){
		 window.top.bootbox.dialog({
				title: "提示信息",
				message: "请确认是否删除",
				size: "middle",
				buttons: {
					OkType: {
			      		label: "确定",
			      		className: "btn-"+bootstrapSkin,
			      		callback: function() {
		    var url = path+"api/sys/Warehouse/deleteWarehouse";
		    var modifierby=securityContext.user_id;
			
			url += "?code=" + warehouseCode;
			url +="&stores="+stores;
			url +="&modifierby="+modifierby;
			$.ajax({
				type: "POST",
			    url: url,
			    async: false,
			    headers:{"token":securityContext.token},
			    success: function(data){
					
					if (data.result_code == "Y") {	
						recordLog("O","APPLETPC","删除仓库成功"+"门店:"+stores+"仓库:"+warehouseCode,securityContext.user_id);
						warehouseCode=null;
						queryStorageList();
						window.top.bootbox.dialog({
							title: "提示信息",
							message: "删除成功！",
							size: "middle",
							buttons: {
								cancelType: {
						      		label: "确定",
						      		className: "btn-"+bootstrapSkin,
					      		callback: function() {
					      			queryWarehouseList();
					      		}
							}
						}
					});
					
					      		
				} else if (data.result_code == "N") {
					result = false;
					recordLog("OF","APPLETPC","删除仓库失败"+"门店:"+stores+"仓库:"+warehouseCode,securityContext.user_id);
					window.top.bootbox.dialog({
						title: "错误信息",
						message: "删除失败！" + "<br><br>" + data.result_info,
						size: "middle",
						buttons: {
							cancelType: {
					      		label: "确定",
					      		className: "btn-"+bootstrapSkin,
					      		callback: function() {
					      			return true;
					      		}
							}
						}
					});
				}
		    }
		});
			      		}
					},
					cancelType: {
			      		label: "取消",
			      		className: "btn-"+bootstrapSkin,
			      		callback: function() {
			      			return true;
			      		}
					}
				}
			});
			}else{
					window.top.bootbox.dialog({ 
					title: "提示信息",
				    size: 'small',
				    message: "请先选择仓库！",
				    buttons: {
			saveType: {
	      		label: "确定",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      		return true;
	      		}
	      		  }
	      		}
				});
			}

}

//库位
function queryStorageList() {
	$("#dsdTable2").bootstrapTable('removeAll');
	
	var url = path+"api/sys/StorageLocation/StorageLocationMgr";
    url +="?warehouse_code="+warehouseCode;
    url +="&stores_code="+stores;
    $.ajax({
		type: "POST",
		url: url,
		async:false,
		headers:{"token":securityContext.token},
		success: function(data) {
			
			if (data.result_code == "Y") {
				
				$("#dsdTable2").bootstrapTable("load", JSON.parse(data.result_info));
				recordLog("O","APPLETPC","获取库位列表成功",securityContext.user_id);
			} else if (data.result_code == "N") {
				recordLog("OF","APPLETPC","获取库位列表失败"+"门店:"+stores+"仓库:"+warehouseCode,securityContext.user_id);
				window.top.bootbox.dialog({
					title: "错误信息",
					message: "数据加载失败！" + "<br><br>" + data.result_info,
					size: "middle",
					buttons: {
						cancelType: {
				      		label: "确定",
				      		className: "btn-"+bootstrapSkin,
				      		callback: function() {
				      			return true;
				      		}
						}
					}
				});
			}
		}
	});
}

//新建库位
function addStorage() {
	if (!warehouseCode) {
		window.top.bootbox.dialog({ 
		title: "提示信息",
		    size: 'small',
		    message: "请先选择仓库！",
		    buttons: {
			saveType: {
	      		label: "确定",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      		return true;
	      		}
	      		  }
	      		}
		});
		return;
	}
	var url = "/APPLETPC/jsp/modules/system/storagelocation/StorageLocationAdd.html";
	
	sessionStorage.setItem('stores', stores);
	sessionStorage.setItem('warehouseCode', warehouseCode);
	sessionStorage.setItem('stores_name', stores_name);
	sessionStorage.setItem('warehouse_name',warehouse_name);
	var structNodeEditFrame = '<iframe id="structNodeEditFrame" class="my-modal-iframe" width="100%" height="280px" src="' + url + '"></iframe>';
	window.top.bootbox.dialog({
		title: "库位新建",
		message: structNodeEditFrame,
		size: "small",
		buttons: {
			saveType: {
	      		label: "保存",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      			var result = window.top.document.getElementById("structNodeEditFrame").contentWindow.doAddStorage();
	      			if (result) {
	      				queryStorageList();
	      				
	      			}
	      			return result;
	      		}
			},
			cancelType: {
	      		label: "取消",
	      		className: "btn-default",
	      		callback: function() {
	      			return true;
	      		}
			}
		}
	});
	
	
}

//编辑库位
function editStorage() {
	if (!code) {
		window.top.bootbox.dialog({ 
		title: "提示信息",
		    size: 'small',
		    message: "请先选择库位！",
		    buttons: {
			saveType: {
	      		label: "确定",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      		return true;
	      		}
	      		  }
	      		}
		});
		return;
	}
	
	var url = "/APPLETPC/jsp/modules/system/storagelocation/StorageLocationEdit.html";
	sessionStorage.setItem('warehouse', warehouseCode);
	sessionStorage.setItem('stores', stores);
	sessionStorage.setItem('storageCode', code);

	var structNodeEditFrame = '<iframe id="structNodeEditFrame" class="my-modal-iframe" width="100%" height="300px" src="' + url + '"></iframe>';
	window.top.bootbox.dialog({
		title: "库位编辑",
		message: structNodeEditFrame,
		size: "small",
		buttons: {
			saveType: {
	      		label: "保存",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      			var result = window.top.document.getElementById("structNodeEditFrame").contentWindow.doAddEditStorageLocation();
	      			if(result){
	      				queryStorageList();
	      			}
	      			return result;
	      		}
			},
			cancelType: {
	      		label: "取消",
	      		className: "btn-default",
	      		callback: function() {
	      			return true;
	      		}
			}
		}
	});
}


//禁用
function deleteStorage(){
	if(whether=="N"){
		window.top.bootbox.dialog({
			title: "提示信息",
			message: "库位已禁用！",
			size: "middle",
			buttons: {
				cancelType: {
		      		label: "确定",
		      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      				return;
	      			}
				}
			}
		})
		return true;
	};
  
     if(code){
		 window.top.bootbox.dialog({
				title: "提示信息",
				message: "确定要禁用吗?",
				size: "middle",
				buttons: {
					OkType: {
			      		label: "确定",
			      		className: "btn-"+bootstrapSkin,
			      		callback: function() {
		    var url = path+"api/sys/StorageLocation/deleteStorageLocation";
		    
			var modifierby=securityContext.user_id;
			url += "?warehouse=" + warehouseCode;
			url +="&stores="+stores;
			url +="&storageCode="+code;
			url +="&modifierby="+modifierby;
			$.ajax({
				type: "POST",
			    url: url,
			    headers:{"token":securityContext.token},
			    async: false,
			    success: function(data){
					
					if (data.result_code == "Y") {		
						recordLog("O","APPLETPC","库位禁用成功"+"门店:"+stores+"仓库:"+warehouseCode+"库位:"+code,securityContext.user_id);
						window.top.bootbox.dialog({
							title: "提示信息",
							message: "禁用成功！",
							size: "middle",
							buttons: {
								cancelType: {
						      		label: "确定",
						      		className: "btn-"+bootstrapSkin,
					      		callback: function() {
					      			queryStorageList();
					      		}
							}
						}
					});
					
					      		
				} else if (data.result_code == "N") {
					result = false;
					recordLog("OF","APPLETPC","库位禁用失败"+"门店:"+stores+"仓库:"+warehouseCode+"库位:"+code,securityContext.user_id);
					window.top.bootbox.dialog({
						title: "错误信息",
						message: "保存失败！" + "<br><br>" + data.result_info,
						size: "middle",
						buttons: {
							cancelType: {
					      		label: "确定",
					      		className: "btn-"+bootstrapSkin,
					      		callback: function() {
					      			return true;
					      		}
							}
						}
					});
				}
		    }
		});
			      		}
					},
					cancelType: {
			      		label: "取消",
			      		className: "btn-"+bootstrapSkin,
			      		callback: function() {
			      			return true;
			      		}
					}
				}
			});
			}else{
					window.top.bootbox.dialog({ 
					title: "提示信息",
				    size: 'small',
				    message: "请先选择！",
				    buttons: {
			saveType: {
	      		label: "确定",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      		return true;
	      		}
	      		  }
	      		}
				});
			}

}
//删除
function delStorage(){
	
  
     if(code){
		 window.top.bootbox.dialog({
				title: "提示信息",
				message: "请确认是否删除",
				size: "middle",
				buttons: {
					OkType: {
			      		label: "确定",
			      		className: "btn-"+bootstrapSkin,
			      		callback: function() {
		    var url = path+"api/sys/StorageLocation/deleteStorage";
		    
			var modifierby=securityContext.user_id;
			url += "?warehouse=" + warehouseCode;
			url +="&stores="+stores;
			url +="&storageCode="+code;
			url +="&modifierby="+modifierby;
			$.ajax({
				type: "POST",
			    url: url,
			    async: false,
			    headers:{"token":securityContext.token},
			    success: function(data){
					
					if (data.result_code == "Y") {	
						recordLog("O","APPLETPC","删除库位成功"+"门店:"+stores+"仓库:"+warehouseCode+"库位:"+code,securityContext.user_id);
						code=null;
						window.top.bootbox.dialog({
							title: "提示信息",
							message: "删除成功！",
							size: "middle",
							buttons: {
								cancelType: {
						      		label: "确定",
						      		className: "btn-"+bootstrapSkin,
					      		callback: function() {
					      			queryStorageList();
					      		}
							}
						}
					});
					
					      		
				} else if (data.result_code == "N") {
					result = false;
					recordLog("OF","APPLETPC","删除库位失败"+"门店:"+stores+"仓库:"+warehouseCode+"库位:"+code,securityContext.user_id);
					window.top.bootbox.dialog({
						title: "错误信息",
						message: "删除失败！" + "<br><br>" + data.result_info,
						size: "middle",
						buttons: {
							cancelType: {
					      		label: "确定",
					      		className: "btn-"+bootstrapSkin,
					      		callback: function() {
					      			return true;
					      		}
							}
						}
					});
				}
		    }
		});
			      		}
					},
					cancelType: {
			      		label: "取消",
			      		className: "btn-"+bootstrapSkin,
			      		callback: function() {
			      			return true;
			      		}
					}
				}
			});
			}else{
					window.top.bootbox.dialog({ 
					title: "提示信息",
				    size: 'small',
				    message: "请先选择库位！",
				    buttons: {
			saveType: {
	      		label: "确定",
	      		className: "btn-"+bootstrapSkin,
	      		callback: function() {
	      		return true;
	      		}
	      		  }
	      		}
				});
			}

}
</script>